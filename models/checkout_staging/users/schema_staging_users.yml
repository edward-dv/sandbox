version: 2

models:
    - name: staging_users
      description: Staged users data from raw, updated via snapshot materialization (adds new records when changes exist without overwritting historicals).
      columns:
        - name: id
          description: Identifier for users.
          tests:
            - not_null
            - relationships:
                to: ref('staging_pageviews')
                field: user_id
        - name: postcode
          description: Postcode the user was in between dbt_valid_from and dbt_valid_to.
          tests:
            - not_null
        - name: load_date
          description: Extract loading date
          tests:
            - not_null
        - name: dbt_scd_id
          description: ID generate by dbt for the slowly changing dimension.
          tests:
            - not_null
        - name: dbt_scd_id
          description: ID generated by dbt for the slowly changing dimension.
          tests:
            - not_null
            - unique
        - name: dbt_updated_at
          description: Date when the dataset was updated by dbt.
          tests:
            - not_null
        - name: dbt_valid_from
          description: Date created by dbt snapshot to indicate start of validity of dimension status.
          tests:
            - not_null
        - name: dbt_valid_to
          description: Date created by dbt snapshot to indicate end of validity of dimension status.